---
title: Установка SuiteCRM
weight: 20
---

:author: likhobory
:email: likhobory@mail.ru

:toc:
:toc-title: Оглавление
:toclevels: 3

:experimental:

:imagesdir: /images/ru/8.x/admin/Installing

ifdef::env-github[:imagesdir: ./../../../../static/images/ru/8.x/admin/Installing]

:btn: btn:

ifdef::env-github[:btn:]

{{% notice info %}}
Это страница содержит описание для SuiteCRM Версии 8. Описание для SuiteCRM версии 7 находится link:../../../../admin/installation-guide/downloading-installing[здесь].
{{% /notice %}}

Если вы впервые устанавливаете SuiteCRM, следуйте этому описанию. Если вы обновляете ранее установленную вервию, обратитесь к разделу link:../upgrading[Обновление системы].

== Подготовка к установке

 . Установите версию PHP, веб-сервер, и базу данных, руководствуясь информацией, указанной в link:../../compatibility-matrix[Таблице совместимости^].
 
 . Установите следующие php-модули:
 * cli
 * curl
 * common
 * intl
 * json
 * gd
 * mbstring
 * mysqli
 * pdo_mysql
 * openssl
 * soap
 * xml
 * zip
 * imap (опционально)
 * ldap (опционально)
 
[horizontal]
*Полезные ссылки*:: link:https://www.digitalocean.com/community/tutorials/how-to-install-php-7-4-and-set-up-a-local-development-environment-on-ubuntu-20-04[DigitalOcean - Установка программного окружения^]

[start=3]
 . Загрузите SuiteCRM со страницы https://suitecrm.com/download
 . Скопируйте загруженные файлы из архива в соответствующую папку веб-сервера и установите необходимые права (см. ниже).

{{% notice note %}}
Обратите внимание, что часть программного обеспечения, указанного в таблице совместимости,  необходима только для разработчиков, и при установке пакета, предлагаемого на официальной странице загрузки, *нет необходимости* в установке node, angular и yarn/npm. Загружаемый пакет уже содержит все необходимые файлы в папке *public/dist*.
{{% /notice %}}

{{% notice note %}}
Если вы используете веб-сервер *apache*, убедитесь, что модуль `mod_rewrite` включён и корректно настроен. Модуль используется при вызове SuiteCRM-Core API, и, если перенаправление отключено, вы получите ошибку `404`.
{{% /notice %}}


[cols="1s,3a"]
|===
|Полезные ссылки |link:https://www.digitalocean.com/community/tutorials/how-to-set-up-mod_rewrite[DigitalOcean - настройка mod_rewrite^] (см. разделы *_How to Activate Mod_Rewrites_* и *_How to permit changes in the .htaccess file_*)
|===

Настройте корневую папку веб-сервера таким образом, чтобы она указывала на папку *public*, в этом случае другие файлы и папки не будут доступны из внешней сети.

Если используется виртуальный хост, то настройка может выглядеть следующим образом: 

[source,xml]
----
<VirtualHost *:80>
    ...

    DocumentRoot /<path-to-suite>/public
    <Directory /<path-to-suite>/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All
    </Directory>

</VirtualHost>
----

[cols="1s,3a"]
|===
|Полезные ссылки |link:https://symfony.com/doc/current/setup/web_server_configuration.html#apache-with-mod-php-php-cgi[Symfony  - настройка веб-сервера^]
|===

== Настройка директивы error_reporting

Убедитесь, что при обработке ошибок не учитываются нефатальные уведомления. Для этого настройте директиву `error_reporting` в файле `php.ini`

[source,ini]
----
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT & ~E_NOTICE & ~E_WARNING
----


== Установка прав

Перейдите в папку, в которую был распакован пакет SUiteCRM и установите права, как это показано ниже:

[source,bash]
----
find . -type d -not -perm 2775 -exec chmod 2755 {} \;
find . -type f -not -perm 0644 -exec chmod 0644 {} \;
find . ! -user www-data -exec chown www-data:www-data {} \;
chmod +x bin/console
----

* При необходимости замените пользователя *www-data* на пользователя, под которым запущен веб-сервер. +
Пользователи, имеющие полный доступ к файлам системы, могут различаться в зависимости от используемой конфигурации системы, например: 
** www-data (Linux/Apache)
** apache   (Linux/Apache)
** nobody   (Linux/Apache)

* Если имя группы отличается от имени пользователя, под которым работает apache, вам могут понадобиться права `0664` вместо `0644` и `2775` вместо `2755`. 

{{% notice note %}}
Приведённые выше команды могут различаться в зависимости от используемой вами ОС. Если у вас возникли трудности с установкой прав - задайте необходимые вопросы на нашем link:https://community.suitecrm.com[форуме^].
{{% /notice %}}

{{% notice note %}}
В зависимости от настроек, вам, возможно, потребуется создать базу данных *до* установки системы. В процессе установки в базу данных будут добавлены необходимые таблицы.
{{% /notice %}}

== Установка системы

Возможны два варианта установки:

* Используя мастер установки в веб-интерфейсе браузера
* Используя установку из <<Установка из командной строки,командной строки>>

=== Использование мастера установки

.  В адресной строке браузера введите: *_\http://<АдресСервера>/<ПутьКПапкеСФайламиSuiteCRM>_* , если система ещё не была установлена, то произойдет перенаправление на адрес  *_\http://<АдресСервера>/<ПутьКПапкеСФайламиSuiteCRM>/#/install>_*

image:lic.png[SuiteCRM 8 - Лицензионное соглашение]

. Примите лицензионное соглашение и перейдите на закладку *Конфигурация*.

image:conf.png[SuiteCRM 8 - Настройка основных параметров при установке]

{{% notice note %}}
Все перечисленные здесь параметры (за исключение параметра *Игнорировать предупреждения при проверке системы*) являются обязательными.
{{% /notice %}}

[start=2]
. Ведите необходимые данные: 

[cols="1s,3a"]
|===
|URL дистрибутива SuiteCRM |Расположение устанавливаемой системы, например: 

* `\https://example-domain.com`
* `\https://localhost`
* `\https://crm.example-domain.com`

{{% notice tip %}}
Как вариант - скопируйте данные из адресной строки браузера.
{{% /notice %}}

|Имя пользователя БД | Логин администратора базы данных.

{{% notice note %}}
Убедитесь, что указанный администратор базы данных имеет разрешения на создание и запись в базу данных SuiteCRM.
{{% /notice %}}

|Пароль базы данных | Пароль администратора базы данных.
|Имя сервера | Сервер, на котором размещается база данных. Если она расположена там же, где и веб-сервер, то используется значение `localhost`

{{% notice note %}}
Если при вводе параметра `localhost` соединение не устанавливается, попробуйте указать ip-адрес `127.0.0.1`.
{{% /notice %}}

|Название базы данных | Имя базы данных для устанавливаемого экземпляра системы, например, `suitecrm`.
|Порт базы данных | Порт, используемой базой данных. Как правило, используется стандартный порт *3306*. Указывайте этот параметр в том случае, если база данных использует нестандартный порт.
|Заполнить базу данных демонстрационными данными | Добавление в базу данных демонстрационных данных.
|Имя администратора системы | Логин администратора системы.
|Пароль администратора | Пароль администратора системы.
|Игнорировать предупреждения при проверке системы | Перед началом установки SuiteCRM проверяет некоторые системные параметры, в частности `max upload file size` и `memory limit`. Некоторые значения этих параметров не являются обязательными на момент установки, и, при необходимости, могут быть изменены позже. Так что если вы хотите пропустить проверку - отметьте этот параметр.
|===

[start=3]
. После установки всех необходимых параметров нажмите на кнопку {btn}[Продолжить].

Как было указано выше, SuiteCRM проверит некоторые системные параметры.
 Если при проверке возникнут ошибки - установка будет остановлена, и вам будет предложено исправить некорректные значения.
Если ошибок не будет обнаружено - установка продолжится, что займет некоторое время.

После окончания установки вы будете перенаправлены на страницу ввода логина/пароля.

=== Установка из командной строки

 . Выполните команду:

** Вариант 1: `./bin/console suitecrm:app:install` без параметров, команда сама запросит необходимые данные 
** Вариант 2: `./bin/console suitecrm:app:install` с указанными ниже параметрами:
+
[source,bash]
----
./bin/console suitecrm:app:install -u "admin_username" -p "admin_password" -U "db_user" -P "db_password" -H "db_host" -N "db_name" -Z "db_port" -S "site_url" -d "demo_data"
----
+
где:

*** *"admin_username"* - логин администратора системы
*** *"admin_password"* - пароль администратора системы
*** *"db_user"* - логин администратора базы данных
	**** Убедитесь, что указываемый администратор БД имеет необходимые права на создание и запись в базу данных SuiteCRM.
*** *"db_password"* - пароль администратора базы данных
*** *"db_host"* - имя хоста для  MySQL, MariaDB или SQL Server. Если БД расположена там же, где и веб-сервер, то используется значение `localhost`.
+
{{% notice note %}}
В некоторых системах при указании `localhost` система попытается установить соединение через сокет. Однако в настоящее время подключение через сокет не поддерживается, поэтому в таких случаях лучше всего использовать ip-адрес `127.0.0.1`.
{{% /notice %}}
+
*** *"db_name"* - имя базы данных для устанавливаемого экземпляра системы
*** *"db_port"* - Порт, используемый базой данных. Указывайте этот параметр в том случае, если база данных использует нестандартный порт. По умолчанию используется стандартный порт *3306*.
*** *"site_url"* - адрес устанавливаемого экземпляра системы (при необходимости скопируйте данные из адресной строки браузера)
*** *"demo_data"* - добавление в БД демонстрационных данных. Допустимые значения: `yes` или `no`. 

Пример:

[source,bash]
----
./bin/console suitecrm:app:install -u "admin" -p "mypass" -U "root" -P "dbpass" -H "localhost" -N "suitecrm" -S "https://yourcrm.com/" -d "yes"
----

{{% notice tip %}}
В примере указаны только *обязательные* аргументы. Для получения полного списка всех доступных аргументов выполните следующую команду из папки с установленной системой: `./bin/console suitecrm:app:install --help`.
{{% /notice %}}

[start=2]
 . По завершении установки ещё раз установите соответствующие права, как это было показано в разделе <<Установка прав>>.

 . После всех вышеописанных действий экземпляр системы будет доступен по адресу *\https://yourcrm.com*

== Включение кеширования (опционально)

Если система не используется в целях разработки и полностью готова к использованию, то рекомендуется включить OPCache для повышения производительности PHP на веб-сервере, указав в файле php.ini следующие параметры:

[source,ini]
----

[opcache]
; Determines if Zend OPCache is enabled
zend_extension=opcache.so
opcache.enable=1

; The OPcache shared memory storage size.
opcache.memory_consumption=256

; The maximum number of keys (scripts) in the OPcache hash table.
; Only numbers between 200 and 100000 are allowed.
opcache.max_accelerated_files=20000

; When disabled, you must reset the OPcache manually or restart the
; webserver for changes to the filesystem to take effect.
opcache.validate_timestamps=0
----

[cols="1s,3a"]
|===
|Полезные ссылки
| * link:https://symfony.com/doc/current/performance.html[Symfony documentation - Performance^]
  * link:https://api-platform.com/docs/core/performance/#enabling-the-metadata-cache[ApiPlatform documentation - Enabling the Metadata Cache^]
|===
